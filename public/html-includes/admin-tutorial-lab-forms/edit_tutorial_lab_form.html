<?php

	include("html-includes/admin-tutorial-lab-forms/adminLabAction.php");
	
	$editLab = new adminLabAction();
	$returnURL = "admin-home-page.php";
	$form_errors = "";
	
	// checks GET and POST, if not set, returns empty string
	$tutorial_lab_id = $editLab->getLabID();
	$tutorial_lab_name = $editLab->getLabName();
	$web_link = $editLab->getWebLink();
	$lab_status = $editLab->getLabStatus();
	$introduction = $editLab->getIntroduction();
	$prerequisites = $editLab->getPrerequisites();
	$key_topics = $editLab->getKeyTopics();
	$key_equations = $editLab->getKeyEquations();
	$description = $editLab->getDescription();
	$instructions = $editLab->getInstructions();
	$data_available = $editLab->getDateAvailable();
	$filepath = $editLab->getFilepath();
	
	$status_list = array();
	$status_list = $editLab->getLabStatusOptions();	
	$lab_list = array();
	$lab_list = $dataUtility->getListTutorialLabIDNames($mdb_control);
	
	if($_SERVER['REQUEST_METHOD'] == 'POST')
	{
		$form_errors = $editLab->processForm($mdb_control, $returnURL);
	}
	
	echo "<div class='form-errors' id='form_errors'> $form_errors </div>";
	
?>


<form id="editTutorialLabForm" method="POST" >

<fieldset>
	<input type='hidden' name='action_type' value='add'>
	
	<h2 class="form">Edit New Tutorial Lab</h2>	
	
	<label>Tutorial Lab: <br>
		<select id="tutorial_lab_id" name="tutorial_lab_id" required 
			onchange="populateForm('section')">
			
			<option value='' ></option>
			<?php
				for($i = 0; $i < count($lab_list); $i++)
				{
					$lab_id = $lab_list[$i]['id'];
					$name = $lab_list[$i]['name'];
					$str = "<option value='$lab_id' >$name</option>";
					
					if(strcmp($tutorial_lab_id, $lab_id) == 0)
					{
						$str = "<option value='$lab_id' selected >$name</option>";
					}
					
					echo "$str";
				}				
			?>
			
		</select>
	</label><br>
	
	<label>Tutorial Lab Name: <br><textarea name="tutorial_lab_name" rows="10" cols="50" 
		spellcheck="true" required ><?php echo "$tutorial_lab_name"; ?></textarea>
	</label><br>
	
	<label>Web Link: <br><input type="text" name="web_link" required 
		value="<?php echo "$web_link"; ?>" >
	</label><br>
	
	<label>Lab Status: <br>
		<select id="lab_status" name="lab_status" required 
			onchange="populateForm('section')">
			
			<option value='' ></option>
			<?php
				for($i = 0; $i < count($status_list); $i++)
				{
					$status = $status_list[$i];
					$str = "<option value='$status' >$status</option>";
					
					if(strcmp($lab_status, $status) == 0)
					{
						$str = "<option value='$status' selected >$status</option>";
					}
					
					echo "$str";
				}				
			?>
			
		</select>
	</label><br>
	
	<label>Introduction: <br><textarea name="introduction" rows="10" cols="50" 
		spellcheck="true" required ><?php echo "$introduction"; ?></textarea>
	</label><br>
	
	<label>Prerequisites: <br><textarea name="prerequisites" rows="10" cols="50" 
		spellcheck="true" required ><?php echo "$prerequisites"; ?></textarea>
	</label><br>
	
	<label>Key Topics: <br><textarea name="key_topics" rows="10" cols="50" 
		spellcheck="true" required ><?php echo "$key_topics"; ?></textarea>
	</label><br>
	
	<label>Key Equations: Select a file. (Optional) 				
		<input type="file" name="key_equations" onchange="showFileNames()">
	</label>
	<p id="fileListing"></p><br>
	
	<label>Description: Select a file. (Optional) 				
		<input type="file" name="description" onchange="showFileNames()">
	</label>
	<p id="fileListing"></p><br>
	
	<label>Instructions: Select a file. (Optional) 				
		<input type="file" name="instructions" onchange="showFileNames()">
	</label>
	<p id="fileListing"></p><br>
	
	<label>Date First Available: (Optional)<br>
		<input type="date" name="data_available"  
			value="<?php echo "$start_date"; ?>" >
	</label><br>
	
	<div class="formButtonDiv">
		<input type="submit" value="Update Tutorial Lab">		
		<a href='<?php echo "$returnURL" ?>' class='button red'>Cancel</a>		
	</div>
		
	</fieldset>
</form>

