
<!--professor-form-page.php?form_type=add_assignment -->
<?php	

	if($_SERVER['REQUEST_METHOD'] == 'POST')
	{
		$is_ok = $assignmentAction->processAssignmentForm($mdb_control, $form_type);
		
		if($is_ok)
		{
			echo "<div class='form_errors' id='form_errors' >
					<p>The update was processed successfully.</p>
					</div>";
		}
		else
		{
			echo "<div class='form_errors' id='form_errors' >
					<p>Sorry, the system was unable to process the update.</p>
					</div>";
		}
	}
	
	
	$section_list = array();
	$section_list = $displayUtility->getListSectionIDNames_ByProfessor(
									$sectionDisplay, $professor_id, $mdb_control);
									
	$tutorial_lab_list = array();
	$tutorial_lab_list = $displayUtility->getListTutorialLabIDNames($mdb_control);
	
	// checks GET and POST, if not set, returns empty string
	$section_id = $assignmentAction->getSectionID();
	$date_assigned = $assignmentAction->getDateAssigned();
	$assignment_name = $assignmentAction->getAssignmentName();
	$section_name = $assignmentAction->getSectionName();
	$date_due = $assignmentAction->getDateDue();
	$points_possible = $assignmentAction->getPointsPossible();
	$tutorial_lab_id = $assignmentAction->getTutorialLabID();
	//$attachments or files? = $assignmentAction->getAttachments();
	
?>

<div class="form-errors" id="form_errors"></div>

<form id="addAssignmentForm" method="POST" enctype="multipart/form-data">
	
	<fieldset>
	
		<input type="hidden" name="date_assigned" value="<?php echo "$date_assigned" ?>" >	
		
		<h2 class="form">Add Assignment</h2>		
		<p>Date: &nbsp&nbsp <?php echo date('m/d/Y');?></p>	
		<br class="form">
		
		<label>Assignment Name: <br><input type="text" name="assignment_name" required 
			value="<?php echo "$assignment_name"; ?>" >
		</label><br class="form">
		
		<label>Section: &nbsp&nbsp 
			<div class="form-select"><select id="section_id" name="section_id" required >
				<option value='' ></option>
				<?php
					for($i = 0; $i < count($section_list); $i++)
					{
						$sec_id = $section_list[$i]['id'];
						$name = $section_list[$i]['name'];
						$str = "<option value='$sec_id' >$name</option>";
						
						if(strcmp($section_id, $sec_id) === 0)
						{
							$str = "<option value='$sec_id' selected >$name</option>";
						}
						
						echo "$str";
					}				
				?>
			</select></div>
		</label><br class="form"><br class="form">		
	
		<label>Tutorial Lab: &nbsp&nbsp 
			<div class="form-select"><select id="tutorial_lab_id" name="tutorial_lab_id" required >
				<option value='' ></option>
				<?php
					for($i = 0; $i < count($tutorial_lab_list); $i++)
					{
						$lab_id = $tutorial_lab_list[$i]['id'];
						$name = $tutorial_lab_list[$i]['name'];
						$str = "<option value='$lab_id' >$name</option>";
						
						if(strcmp($tutorial_lab_id, $lab_id) === 0)
						{
							$str = "<option value='$lab_id' selected >$name</option>";
						}
						
						echo "$str";
					}				
				?>
			</select></div>
		</label><br class="form"><br class="form">
		
		<label>Date Due: <br><input type="date" name="date_due" required 
			min=<?php echo date('m/d/Y'); ?>  value="<?php echo "$date_due"; ?>" >
		</label><br class="form">
		
		<label>Points Possible: <br><input type="number" name="points_possible"  
			min="0" max="1000" required  value="<?php echo "$points_possible"; ?>" >
		</label><br class="form">
		
		<label>Attachments: Select one or more files.  (Optional)
			<div class="fileDiv"> 				
				<input type="file" name="attachments" id="attachments" 
					multiple onchange="showFileNames()">
			</div>
		</label>
		<p id="fileListing"></p><br class="form">
		
		<div class="formButtonDiv">
			<input type="submit" value="Save Assignment">		
			<?php
				$str = "professor-section-page.php?section_id=$section_id";
				echo "<a href='$str' class='button'>Cancel</a>";
			?>		
		</div>
		
	</fieldset>
	
</form>
